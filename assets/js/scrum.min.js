var changes=false;$.fn.extend({touched:function(b){var a=0;$(this).on("touchstart",function(c){if(c.originalEvent.touches.length===1){a=1}else{a=0}});$(this).on("touchmove",function(c){a=0});$(this).on("touchend",function(c){if(a===1){b(c)}})},swipe:function(d){var b,a,c;$(this).on("touchstart",function(f){b=f.originalEvent.changedTouches[0].pageX;a=f.originalEvent.changedTouches[0].pageY;c=f.originalEvent.timeStamp});$(this).on("touchend",function(i){var g=i.originalEvent.changedTouches[0].pageX-b,f=i.originalEvent.changedTouches[0].pageY-a,h=i.originalEvent.timeStamp-c;if(h<=500&&Math.abs(f)<30&&Math.abs(g)>30){d(i,g)}})},swipeRight:function(a){$(this).swipe(function(c,b){if(b>0){a(c)}})},swipeLeft:function(a){$(this).swipe(function(c,b){if(b<0){a(c)}})}});window.onbeforeunload=function(a){if(changes==true){if(terminal==true){if(confirm("Do you want to leave without saving ?")){}else{a.returnValue=false}}else{a.returnValue=false}}};$(document).on("ready",function(){$(".remove-none").find("option[value='']").remove();if($(".searchable").size()){$select=$(".searchable").select2({width:"100%"})}if(typeof Android=="object"){$('a[target="_blank"]').on("click",function(a){a.preventDefault();Android.openPrint($(this)[0].href)})}$(".new-window").on("click",function(c){c.preventDefault();if(typeof Android=="object"){Android.openPrint($(this)[0].href)}else{if($(this).hasClass("full-screen")){var b=window.innerHeight;var a=window.innerWidth-20;window.open($(this).attr("href"),"Printing","scrollbars,resizable,height="+b+",width="+a)}else{window.open($(this).attr("href"),"Printing","scrollbars,resizable,height=400,width=600")}}});$(".datepicker").datepicker({autoSize:true,dateFormat:"dd.mm.yy"});$(".xcrud-select-all").on("click",function(){var a=$(this).closest(".xcrud-list-container");a.find(".xcrud-select").prop("checked",$(this).prop("checked"))});$(".xcrud-select").on("click",function(){if(~$(this).prop("checked")){var a=$(this).closest(".xcrud-list-container");a.find(".xcrud-select-all").prop("checked",false)}});$(".xcrud-row").hover(function(){var a=$(this).position().left;$(this).find("td.xcrud-actions-fixed").attr("style","position:absolute;right:"+a+"px")},function(){$(this).find("td.xcrud-actions-fixed").attr("style","")});$(".xcrud-list-container").scroll(function(){$(this).find("tr.xcrud-th>th").css("top",$(this).scrollTop()+"px")});$(".xcrud-input").on("change",function(a){changes=true})});$(document).on("xcrudafterrequest",function(c,b,d,a){$(".remove-none").find("option[value='']").remove();if($(".searchable").size()){$(".searchable").select2({width:"100%"})}if(d.task=="save"&&a=="success"){changes=false}$(".new-window").on("click",function(e){e.preventDefault();window.open($(this).attr("href"),"Printing","scrollbars,resizable,height=400,width=600")});$(".xcrud-select-all").on("click",function(){var e=$(this).closest(".xcrud-list-container");e.find(".xcrud-select").prop("checked",$(this).prop("checked"))});$(".xcrud-select").on("click",function(){if(~$(this).prop("checked")){var e=$(this).closest(".xcrud-list-container");e.find(".xcrud-select-all").prop("checked",false)}});$(".xcrud-row").hover(function(){var e=$(this).position().left;$(this).find("td.xcrud-actions-fixed").attr("style","position:absolute;right:"+e+"px")},function(){$(this).find("td.xcrud-actions-fixed").attr("style","")});$(".xcrud-list-container").scroll(function(){$(this).find("tr.xcrud-th>th").css("top",$(this).scrollTop()+"px")})});$(document).on("xcrudbeforedepend",function(b,a){if($(".searchable").size()){$(".searchable").each(function(){$(this).select2("destroy")})}});$(document).on("xcrudafterdepend",function(b,a){$(".remove-none").find("option[value='']").remove();if($(".searchable").size()){$(".searchable").select2({width:"100%"})}});$(document).on("xcrudbeforevalidate",function(b,a){$(a).find('[data-pattern="numeric"],[data-pattern="point"]').each(function(){var c=$(this).val();c=c.replace(/ /g,"");$(this).val(c)})});jQuery(document).on("xcrud_destroy",function(){var a=jQuery;if(a(".xcrud").size()){a(".xcrud").off("change",".xcrud-actionlist");a(".xcrud").off("change",".xcrud-daterange");a(".xcrud").off("change",".xcrud-columns-select");a(".xcrud").off("click",".xcrud-action");a(".xcrud").off("click",".xcrud-toggle-show");a(".xcrud").off("keypress",".xcrud-input");a(".xcrud").off("click",".xcrud-search-toggle");a(".xcrud").off("keydown",".xcrud-searchdata");a(".xcrud").off("change",".xcrud-upload");a(".xcrud").off("click",".xcrud-remove-file");a(".xcrud").off("click",".xcrud_modal")}});function activate_field(a,c){if($(a).css("display")=="none"){$(a).closest(".form-group").slideDown("fast")}if($(a).attr("readonly")){$(a).attr("readonly",false)}if(c){$(a).attr("data-required",c);$(a).data("required",c);$(a).closest(".form-group").find(".xcrud-input").data("required",c);var b=$(a).closest(".form-group").find("label").text();if(b.substring(b.length-1)!="*"){$(a).closest(".form-group").find("label").append("*")}}else{$(a).removeAttr("data-required");$(a).removeData("required");$(a).removeClass("validation-error");var b=$(a).closest(".form-group").find("label").text();if(b.substring(b.length-1)=="*"){$(a).closest(".form-group").find("label").text(b.substring(0,b.length-1))}}}function deactivate_field(c,b,a){$(c).removeAttr("data-required");if(a=="readonly"){$(c).attr("readonly",true)}else{$(c).closest(".form-group").slideUp("fast")}$(c).removeData("required");$(c).closest(".form-group").find(".xcrud-input").removeData("required");$(c).removeClass("validation-error");if(b){$(c).val(b)}else{$(c).val("")}}function change_label(b,a){var c=$(b).closest(".form-group").find("label").text();$(b).closest(".form-group").find("label").text(a);if(c.substring(c.length-1)=="*"){$(b).closest(".form-group").find("label").append("*")}};